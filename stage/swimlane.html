<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="emTesseract Ops ‚Äî Swimlane workflow view">
  <title>Swimlane ‚Äî emTesseract Ops</title>
  <link rel="icon" type="image/png" href="/logo.png?v=2" sizes="any">
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/stage/stage.css">
  <script>
    (function () {
      var t = localStorage.getItem("emtesseract-theme") || (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
      document.documentElement.setAttribute("data-theme", t);
    })();
  </script>
</head>

<body class="stage-page stage-page--swimlane">
  <header class="stage-header">
    <div class="stage-header__inner">
      <a href="/" class="stage-logo">
        <img src="/logo.png" alt="emTesseract" width="32" height="32">
        <span>Swimlane</span>
      </a>
      <nav class="stage-nav">
        <a href="/stage/">Stage</a>
        <a href="/stage/chat.html">Chat</a>
        <a href="/stage/roundtables.html">Roundtables</a>
        <a href="/">‚Üê Home</a>
        <button type="button" class="theme-toggle" aria-label="Toggle light/dark mode">
          <span class="theme-toggle__icon">üåô</span>
          <span class="theme-toggle__label">Dark</span>
        </button>
      </nav>
    </div>
  </header>

  <main class="swimlane-main">
    <div class="swimlane-board" id="swimlane-board">
      <div class="swimlane-column" data-stage="proposal">
        <h3 class="swimlane-column__title">Proposal</h3>
        <div class="swimlane-column__cards" id="lane-proposal"></div>
      </div>
      <div class="swimlane-column" data-stage="approved">
        <h3 class="swimlane-column__title">Approved</h3>
        <div class="swimlane-column__cards" id="lane-approved"></div>
      </div>
      <div class="swimlane-column" data-stage="in_progress">
        <h3 class="swimlane-column__title">In progress</h3>
        <div class="swimlane-column__cards" id="lane-in_progress"></div>
      </div>
      <div class="swimlane-column" data-stage="done">
        <h3 class="swimlane-column__title">Done</h3>
        <div class="swimlane-column__cards" id="lane-done"></div>
      </div>
    </div>
    <div class="swimlane-empty" id="swimlane-empty" hidden>No work items yet.</div>
  </main>

  <script src="/stage/config.js"></script>
  <script src="/stage/shared.js"></script>
  <script src="/stage/swimlane.js"></script>
  <script>
    (function () {
      const storageKey = "emtesseract-theme";
      const getPreferred = () =>
        localStorage.getItem(storageKey) ||
        (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
      const setTheme = (theme) => {
        document.documentElement.setAttribute("data-theme", theme);
        const btn = document.querySelector(".theme-toggle");
        if (btn) {
          btn.querySelector(".theme-toggle__icon").textContent = theme === "dark" ? "‚òÄÔ∏è" : "üåô";
          btn.querySelector(".theme-toggle__label").textContent = theme === "dark" ? "Light" : "Dark";
        }
        localStorage.setItem(storageKey, theme);
      };
      setTheme(getPreferred());
      document.querySelector(".theme-toggle")?.addEventListener("click", () => {
        setTheme(document.documentElement.getAttribute("data-theme") === "dark" ? "light" : "dark");
      });
    })();
  </script>
</body>

</html>
